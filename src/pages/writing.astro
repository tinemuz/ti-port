---
import MainLayout from "../layouts/main-layout.astro";
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import { formatDate } from "../util/utils";
import Footer from "../components/Footer";

const allPosts: CollectionEntry<"posts">[] = (
  await getCollection("posts")
).sort(
  (a: CollectionEntry<"posts">, b: CollectionEntry<"posts">) =>
    b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<MainLayout title="Writing">
  <div
    class="flex flex-col text-mtext md:text-sm"
  >
    <div class="flex flex-grow flex-col items-center justify-center">
      <div class="w-full border-b border-b-mgray pb-8 pt-6 md:max-w-[812px]">
        <h2 class="pb-4 text-lg font-bold">Writing</h2>
        <p class="text-justify">
          I write about projects I have worked on and anything I find
          interesting and meaningfull.
        </p>
      </div>
      <div class="pt-8"></div>

      <div class="w-full flex-grow md:max-w-[812px]">
        {
          allPosts.map((post) => (
            <div class="grid grid-cols-[25%,70%] justify-between pb-7">
              <div>
                <p>{formatDate(post.data.pubDate)}</p>
              </div>
              <div>
                <a href={"/posts/" + post.slug}>
                  {post.data.title} - {post.data.description}
                </a>
                <div class="flex flex-wrap gap-3 pt-2">
                  {post.data.tags.map((tag: string) => (
                    <span class="rounded-full bg-mgray px-2 py-[3px] text-xs">
                      <a href={"/posts/tag/" + tag}>{tag}</a>
                    </span>
                  ))}
                </div>
              </div>
            </div>
          ))
        }
      </div>

    </div>
  </div>
</MainLayout>
