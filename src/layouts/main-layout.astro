---
// src/layouts/MainLayout.astro
import PageTransition from "../components/PageTransition.tsx";
const { title } = Astro.props;
import Nav from "../components/Nav.astro";
import Footer from "../components/Footer.astro";
import "../../src/styles/global.css";
import "@fontsource/dm-mono";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="Tinetariro Muzunzandare"
      content="Portfolio, software developer"
    />
    <title>{title}</title>
    <link rel="sitemap" href="/sitemap-index.xml" />

    <script>
      (function () {
        const themes = [
          "theme-base",
          "theme-darkstar",
          "theme-oceanic",
          "theme-sunset-glow",
          "theme-forest-mist",
          "theme-solar-flare",
          "theme-arctic-chill",
        ];
        const savedTheme = localStorage.getItem("theme") || themes[0];
        document.documentElement.classList.add(savedTheme);
      })();
    </script>

    <!-- SVG filter definition -->
    <style>
      /* The full-screen overlay */
      .overlay {
        position: fixed;

        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none; /* Makes sure the overlay doesn't block clicks */
        filter: url(#grainy); /* Apply the SVG filter */
        z-index: 9999; /* Ensure it is on top of everything */
      
      }
    </style></head
  >
  <body class="bg-skin-background px-6 text-xs md:text-sm">
    <PageTransition client:only="react">
      <main>
        <Nav />
        <div class="min-h-[calc(100vh-560px)] md:min-h-[calc(100vh-460px)]">
          <slot />
        </div>
        <Footer />
      </main>
    </PageTransition>
    
    <div class="overlay opacity-85 mix-blend-overlay"></div>
  </body>
</html>

<svg style="display:none;">
  <filter id="grainy">
    <feTurbulence type="turbulence" baseFrequency="0.65"></feTurbulence>
  </filter>
</svg>
